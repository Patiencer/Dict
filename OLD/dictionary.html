<script>
    window.onfocus = function () {
        let word = document.querySelector('#word');
        word.focus();
        word.value = '';
    }
    if (window.Dictionary == undefined) {
        const { Dictionary } = require('./dictionary.js');
        window.dictionary = new Dictionary();
        window.dictionary.init();
        updateHistory();
    }
    async function search() {
        let inputWord = document.querySelector('#word').value.trim();
        let word = await eval(`dictionary.${dictionary.detail.function}('${inputWord}')`);
        if (word.hasContent) main.playSound(word.soundUrl);
        try {
            let resultAddWord = await main.addWord(word);
            word.id = resultAddWord.id;
        } catch (error) {
            console.error(error);
        }
        let resultUpdateHistory = await updateHistory();
        if (word.isPhrase == false) {
            showTheWord(word.id, word.url);
        }
    }
    function deleteTheWord(wordId) {
        main.deleteWord(wordId).then(result => {
            if (result) {
                let wordDiv = document.querySelector('#card' + wordId);
                wordDiv.remove();
            }
        });
    }
</script>